var __driveselect=function(a){var s=function(g){function m(b){if(!b)return alert("UI load error."),!1;var a=document.createElement("div");document.body.insertBefore(a,document.body.firstChild);a.innerHTML=b;return!0}var l=function(){var b;b=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");b.open("GET",a.ESVS.SRCPath+"unisignweb/rsrc/layout/driveselect.html?version="+a.ver,!1);b.send(null);return b.responseText},h=function(){var b;b=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");b.open("GET",a.ESVS.SRCPath+"unisignweb/rsrc/lang/driveselect_"+a.ESVS.Language+".js?version="+a.ver,!1);b.send(null);return b.responseText},f=a.ESVS.TabIndex;return function(){var b=eval(l),c=eval(eval(h)()),n=g.type,d=g.args.list,p=g.args.list.length;m(b());var e=document.getElementById("us-drive-select-lbl-title"),k=document.getElementById("us-drive-select-disk-img"),q=document.getElementById("us-drive-select-disk-name"),r=document.getElementById("us-drive-select-disk-lbl"),b=document.getElementById("us-drive-select-disk-select");document.getElementById("us-drive-select-cls-btn-img").setAttribute("src",a.ESVS.SRCPath+"unisignweb/rsrc/img/x-btn.png",0);if("DEVICE_REMOVABLE_DISK"===n){if(e.appendChild(document.createTextNode(c.IDS_DRIVE_SELECTION)),e.setAttribute("tabindex",f,0),k.setAttribute("src",a.ESVS.SRCPath+"unisignweb/rsrc/img/media_removable.png",0),q.appendChild(document.createTextNode(c.IDS_DRIVE_REMOVABLE)),r.appendChild(document.createTextNode(c.IDS_DRIVE_SELECTION_CHOOSE_DISK)),b.setAttribute("tabindex",f+1,0),0<p)for(e=0;e<p;e++)k=document.createElement("option"),k.setAttribute("value",d[e].index,0),k.appendChild(document.createTextNode(d[e].name)),b.appendChild(k)}else if("DEVICE_SAVE_TOKEN"===n&&(e.appendChild(document.createTextNode(c.IDS_SAVE_TOKEN_SELECTION)),e.setAttribute("tabindex",f,0),k.setAttribute("src",a.ESVS.SRCPath+"unisignweb/rsrc/img/media_savetoken.png",0),q.appendChild(document.createTextNode(c.IDS_SAVE_TOKEN)),r.appendChild(document.createTextNode(c.IDS_SAVE_TOKEN_CHOOSE_SAVE_TOKEN)),b.setAttribute("tabindex",f+1,0),0<p))for(e=0;e<p;e++)k=document.createElement("option"),k.setAttribute("value",d[e].index,0),k.appendChild(document.createTextNode(d[e].name)),b.appendChild(k);d=document.getElementById("us-drive-select-confirm-btn");d.setAttribute("value",c.IDS_CONFIRM,0);d.setAttribute("title",c.IDS_CONFIRM+c.IDS_BUTTON,0);d.setAttribute("tabindex",f+2,0);d.onclick=function(){var a=document.getElementById("us-drive-select-disk-select"),a=parseInt(a.selectedIndex)+1;g.onConfirm(a)};d=document.getElementById("us-drive-select-cancel-btn");d.setAttribute("value",c.IDS_CANCEL,0);d.setAttribute("title",c.IDS_CANCEL+c.IDS_BUTTON,0);d.setAttribute("tabindex",f+3,0);d.onclick=function(){g.onCancel()};d=document.getElementById("us-drive-select-cls-img-btn");"DEVICE_REMOVABLE_DISK"===n?d.setAttribute("title",c.IDS_DRIVE_SELECTION_CLOSE,0):"DEVICE_SAVE_TOKEN"===n&&d.setAttribute("title",c.IDS_SAVE_TOKEN_CLOSE,0);d.setAttribute("tabindex",f+4,0);d.onclick=function(){g.onCancel()};return document.getElementById("us-div-drive-select")}()};return function(g){var m=a.uiLayerLevel,l=a.uiUtil().getOverlay(m),h=s({type:g.type,args:g.args,onConfirm:g.onConfirm,onCancel:g.onCancel});h.style.zIndex=m+1;a.ESVS.TargetObj.insertBefore(l,a.ESVS.TargetObj.firstChild);var f=window.onresize;return{show:function(){draggable(h,document.getElementById("us-div-drive-select-title"));l.style.display="block";a.uiUtil().offsetResize(h);window.onresize=function(){a.uiUtil().offsetResize(h);f&&f()};a.uiLayerLevel+=10;a.ESVS.TabIndex+=30;setTimeout(function(){var a=h.getElementsByTagName("p");if(0<a.length)for(var c=0;c<a.length;c++)"us-drive-select-lbl-title"==a[c].id&&a[c].focus()},10)},hide:function(){l.style.display="none";h.style.display="none"},dispose:function(){window.onresize=function(){f&&f()};h.parentNode.parentNode.removeChild(h.parentNode);l.parentNode.removeChild(l);a.uiLayerLevel-=10;a.ESVS.TabIndex-=30}}}};