var __pin=function(c){var l=function(e){function k(a){if(!a)return alert("UI load error."),!1;var b=document.createElement("div");document.body.insertBefore(b,document.body.firstChild);b.innerHTML=a;return!0}var g=function(){var a;a=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");a.open("GET",c.ESVS.SRCPath+"unisignweb/rsrc/layout/pin.html?version="+c.ver,!1);a.send(null);return a.responseText},d=function(){var a;a=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");a.open("GET",c.ESVS.SRCPath+"unisignweb/rsrc/lang/pin_"+c.ESVS.Language+".js?version="+c.ver,!1);a.send(null);return a.responseText},f=c.ESVS.TabIndex;return function(){var a=eval(g),b=eval(eval(d)()),h=e.type;k(a());a=document.getElementById("us-pin-lbl-title");"PIN_SAVE_TOKEN"==h?a.appendChild(document.createTextNode(b.IDS_SAVETOKEN_PIN)):a.appendChild(document.createTextNode(b.IDS_SECTOKEN_PIN));a.setAttribute("tabindex",f,0);document.getElementById("us-pin-cls-btn-img").setAttribute("src",c.ESVS.SRCPath+"unisignweb/rsrc/img/x-btn.png",0);a=document.getElementById("us-pin-sectoken-img");"PIN_SAVE_TOKEN"==h?a.setAttribute("src",c.ESVS.SRCPath+"unisignweb/rsrc/img/media_savetoken.png",0):a.setAttribute("src",c.ESVS.SRCPath+"unisignweb/rsrc/img/media_securitytoken.png",0);a=document.getElementById("us-pin-sectoken-name");"PIN_SAVE_TOKEN"==h?a.appendChild(document.createTextNode(b.IDS_SAVETOKEN)):a.appendChild(document.createTextNode(b.IDS_SECTOKEN));a=document.getElementById("us-pin-notice-text");"PIN_SAVE_TOKEN"==h?a.appendChild(document.createTextNode(b.IDS_SAVETOKEN_PIN_NOTICE)):a.appendChild(document.createTextNode(b.IDS_SECTOKEN_PIN_NOTICE));a=document.getElementById("us-pin-input-textbox");a.setAttribute("tabindex",f+1,0);a.onkeydown=function(a){if(a=a?a:event)a=a||window.event,13==(a.which||a.keyCode)&&document.getElementById("us-pin-confirm-btn").click()};a=document.getElementById("us-pin-confirm-btn");a.setAttribute("value",b.IDS_CONFIRM,0);a.setAttribute("title",b.IDS_CONFIRM+b.IDS_BUTTON,0);a.setAttribute("tabindex",f+2,0);a.onclick=function(){if(b){var a=document.getElementById("us-pin-input-textbox");if(a.value)e.onConfirm(a.value),a.value="";else{var d=null,d="PIN_SAVE_TOKEN"==e.type?b.IDS_MSGBOX_ERROR_PLEASE_INPUT_SAVETOKEN_PIN:b.IDS_MSGBOX_ERROR_PLEASE_INPUT_SECTOKEN_PIN;c.uiUtil().msgBox(d);a.focus()}}};a=document.getElementById("us-pin-cancel-btn");a.setAttribute("value",b.IDS_CANCEL,0);a.setAttribute("title",b.IDS_CANCEL+b.IDS_BUTTON,0);a.setAttribute("tabindex",f+3,0);a.onclick=function(){e.onCancel()};a=document.getElementById("us-pin-cls-btn");"PIN_SAVE_TOKEN"==h?a.setAttribute("title",b.IDS_SAVETOKEN_PIN_CLOSE,0):a.setAttribute("title",b.IDS_SECTOKEN_PIN_CLOSE,0);a.setAttribute("tabindex",f+4,0);a.onclick=function(){e.onCancel()};return document.getElementById("us-div-pin")}()};return function(e){var k=c.uiLayerLevel,g=c.uiUtil().getOverlay(k),d=l({type:e.type,args:e.args,onConfirm:e.onConfirm,onCancel:e.onCancel});d.style.zIndex=k+1;c.ESVS.TargetObj.insertBefore(g,c.ESVS.TargetObj.firstChild);var f=window.onresize;return{show:function(){draggable(d,document.getElementById("us-div-pin-title"));g.style.display="block";c.uiUtil().offsetResize(d);window.onresize=function(){c.uiUtil().offsetResize(d);f&&f()};c.uiLayerLevel+=10;c.ESVS.TabIndex+=30;setTimeout(function(){var a=d.getElementsByTagName("p");if(0<a.length)for(var b=0;b<a.length;b++)"us-pin-lbl-title"==a[b].id&&a[b].focus()},10)},hide:function(){g.style.display="none";d.style.display="none"},dispose:function(){window.onresize=function(){f&&f()};d.parentNode.parentNode.removeChild(d.parentNode);g.parentNode.removeChild(g);c.uiLayerLevel-=10;c.ESVS.TabIndex-=30}}}};